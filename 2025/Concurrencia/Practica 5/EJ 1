--Se requiere modelar un puente de un solo sentido, el puente solo soporta el peso de 5 unidades de peso.
--Cada auto pesa 1 unidad, cada camioneta pesa 2 unidades y cada camión 3 unidades. Suponga que hay una 
--cantidad innumerable de vehículos (A autos, B camionetas y C camiones). a. Realice la solución 
--suponiendo que todos los vehículos tienen la misma prioridad. b. Modifique la solución para que tengan 
--mayor prioridad los camiones que el resto de los vehículos
procedure puente is

task Coordinador is
   entry solicitarPaso(tipo: IN Integer;respuesta: OUT Boolean);
   entry liberarPaso(tipo: IN Integer);
end Coordinador;

task type vehiculo;
arrVehiculos: array(1..N) of vehiculo;

task body Coordinador is
   pesoTotal:Integer;
   pesoTipo: array(1..3) of Integer;
begin
   pesoTipo(1):=1;
   pesoTipo(2):=2;
   pesoTipo(3):=3;
   pesoTotal:=5;
   loop
      select
         when ((liberarPaso'Count=0) and (pesoTotal>0))=>accept solicitarPaso(tipo: IN Integer;respuesta: OUT Boolean) do -- Le doy prioridad a que alguien quiera liberar
            if ((pesoTotal-pesoTipo(tipo))>=0) then
               pesoTotal:=pesoTotal-pesoTipo(tipo);
               respuesta:=true;
            else 
               respuesta:=false;
            end if;
         end solicitarPaso;
      or
         accept liberarPaso (tipo : IN Integer)do
            pesoTotal:=pesoTotal+pesoTipo(tipo);
         end liberarPaso;
      end select;
   end loop;
end Coordinador;

task body vehiculo is
   tipo: Integer;
   respuesta: Boolean;
begin
   --Como determino que tipo es cada si son inmuerables?
   loop
      Coordinador.solicitarPaso (tipo,respuesta);
      if (respuesta) then
         --El vehiculo atraviesa el puente
         exit;
      end if;
   end loop;
   Coordinador.liberarPaso (tipo);
end vehiculo;

begin
   --Aca determinaria el tipo pero no sé como
end puente;